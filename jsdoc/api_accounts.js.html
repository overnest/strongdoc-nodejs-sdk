<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: api/accounts.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: api/accounts.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const msg = require('../proto/accounts_pb');
const misc = require('../util/misc')

/**
 * Registers a new organization. A new administrator user will also be created.
 * New users can be added using this administrator account.
 * 
 * @function
 * @param {!StrongDoc} client - The StrongDoc client used to call this API.
 * @param {!string} orgName - The organization name to create
 * @param {!string} orgAddr - The organization address
 * @param {!string} adminName - The organization administrator name
 * @param {!string} adminPassword - The organization administrator password
 * @param {!string} adminEmail - The organization administrator email
 * @return {RegisterOrganizationResponse} - The register organization response.
 */
const registerOrganization = async (client, orgName, orgAddr, adminName, 
    adminPassword, adminEmail) => {
    misc.checkClient(client, false);

    const req = new msg.RegisterOrganizationRequest();
    req.setOrgname(orgName);
    req.setOrgaddr(orgAddr);
    req.setUsername(adminName);
    req.setPassword(adminPassword);
    req.setEmail(adminEmail);
    req.setSharableorgsList(null);
    req.setMultilevelshare(false);

    result = await client.registerOrganizationSync(req);
    resp = new msg.RegisterOrganizationResponse(result.array);
    return (new RegisterOrganizationResponse(resp.getOrgid(), resp.getUserid())); 
};


/**
 * The response returned from the register organization API call.
 * @class RegisterOrganizationResponse
 * @hideconstructor
 */
class RegisterOrganizationResponse {
    /**
     * @constructs
     * @private
     * @param {!string} orgID - The organization ID
     * @param {!string} userID - the user ID
     */
    constructor(orgID, userID) {
        this.orgID = orgID;
        this.userID = userID;
    }

    /**
     * Returns the organiation ID
     * @return {!string} The organization ID
     */
    getOrgID() {
        return this.orgID;
    }

    /**
     * Returns the user ID
     * @return {!string} The userID
     */
    getUserID() {
        return this.userID;
    }
}

/**
 * Removes an organization, deleting all data stored with the organization. 
 * This requires an administrator priviledge.
 * 
 * @function
 * @param {!StrongDoc} client - The StrongDoc client used to call this API.
 * @param {!boolean} force - If this is false, removal will fail if there 
 *                          are still data stored with the organization. 
 *                          This prevents accidental deletion.
 * @return {!boolean} - Whether the removal was a success
 */
const removeOrganization = async (client, force) => {
    misc.checkClient(client, true);

    const req = new msg.RemoveOrganizationRequest();
    req.setForce(force);
    result = await client.removeOrganizationSync(req, client.getAuthMeta());
    resp = new msg.RemoveOrganizationResponse(result.array);
    return resp.getSuccess();
};

exports.registerOrganization = registerOrganization;
exports.removeOrganization = removeOrganization;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="DocumentResult.html">DocumentResult</a></li><li><a href="EncryptDocumentResponse.html">EncryptDocumentResponse</a></li><li><a href="RegisterOrganizationResponse.html">RegisterOrganizationResponse</a></li><li><a href="SearchResponse.html">SearchResponse</a></li><li><a href="StrongDoc.html">StrongDoc</a></li><li><a href="UploadDocumentResponse.html">UploadDocumentResponse</a></li></ul><h3>Global</h3><ul><li><a href="global.html#decryptDocument">decryptDocument</a></li><li><a href="global.html#downloadDocument">downloadDocument</a></li><li><a href="global.html#encryptDocument">encryptDocument</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#registerOrganization">registerOrganization</a></li><li><a href="global.html#removeOrganization">removeOrganization</a></li><li><a href="global.html#search">search</a></li><li><a href="global.html#uploadDocument">uploadDocument</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Fri Feb 21 2020 14:53:55 GMT-0800 (Pacific Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
